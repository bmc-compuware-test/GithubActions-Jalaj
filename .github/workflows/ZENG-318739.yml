name: code-pipeline-sync-local

on: push

jobs:
  generate:
    name: sync, build & deploy
    runs-on: [Rakesh-Github-Runner]
    env:
      Win_Topaz_Location: 'C:\TopazCLI\23.01.02_134'
    
    steps:
      - name: checkout step
        uses: actions/checkout@v2
        with:
          fetch-depth: 0
      
      - name: sync step
        uses: bmc-compuware/ispw-sync-local@ZENG-318739
        id: sync
        with:
          host: 'cw09.bmc.com'
          port: 47624
          uid: 'pinrxv0'
          pass: 'abc1235'
          runtimeConfiguration: 'TPTP'
          stream: 'TOPAZ'
          application: 'ISP3'
          subAppl: 'ISP3'
          checkoutLevel: 'DEV2'
          gitUid: 'jarora8'
          gitToken: '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'
          winTopazPath: ${{ env.Win_Topaz_Location }}
          #containerCreation: 'per-branch'
          showEnv: true
          assignmentPrefix: 'ISP3'
          ispwConfigPath: 'demo\ispwconfig.yml'
      
      - name: Get automatic build parameters
        run: echo "automaticBuildJson=${{ steps.sync.outputs.automaticBuildJson }}"
     
